<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript">
        // 打开一个 web socket
        var ws = new WebSocket("ws://localhost:8080");
        ws.onopen = function () {
            // Web Socket 已连接上，使用 send() 方法发送数据
            ws.send(JSON.stringify({'id': 1, 'body': ''}))
        };
        ws.onmessage = function (evt) {
            var received_msg = evt.data;
            console.log(received_msg);
            result = JSON.parse(received_msg);
            id = result['id'];
            if (id === 0) {
                alert(received_msg);
                return;
            }
            var body = result['body'];
            switch (id) {
                case 1:

                    break;
                case 2:
                    var test = JSON.parse(body)
                    break;
                case 3:

                    break;
                case 4:

                    break;
                case 5:

                    break;

            }


        };
        ws.onclose = function () {
            // 关闭 websocket
            alert("连接已关闭...");
        }

        function sendWord() {
            ws.send(JSON.stringify({'id': 2, 'body': $("#answer").val()}))
        }
    </script>

</head>
<body>

<div id="sse">
    <label for="answer"></label><input id="answer" type="text">
    <input id="btn" onclick="sendWord()" type="button" value="提交" minlength="4" required>
</div>

</body>
</html>
